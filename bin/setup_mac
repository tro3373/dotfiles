#!/usr/bin/env bash

script_dir=$(cd "$(dirname $0)"; pwd)

has() { command -v ${1} >& /dev/null; }
log() { echo "$(date "%Y-%m-%d %H:%M:%S") $*" 1>&2; }

install_app() {
  has $1 && return;
  brew install "$@"
}
install_apps() {
  # install brew
  if ! has brew; then
    echo "export PATH=/usr/local/bin:\$PATH" >> ~/.bash_profile
    sudo mkdir /usr/local/
    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    source ~/.bash_profile
    brew update
    brew -v
  fi

  install_app git
  install_app gnu-sed
  install_app lua
  install_app vim

  install_app binutils
  install_app coreutils
  install_app diffutils
  install_app findutils
  install_app gawk
  install_app gnu-sed
  install_app gnu-tar
  # install_app gnutls
  install_app grep
  install_app gzip
  # install_app wdiff
  install_app wget
  # install_app --with-default-names ed
  install_app gnu-indent
  install_app gnu-which
  # install_app --with-readline gpg

}

install_dot_apps() {
  $script_dir/setup -e
}

main() {
  install_apps
  install_dot_apps
  # chrome
  # google-japanese-ime
  # item2
  # karabiner
  # scroll reverser
  # change keyrepeat fast
}
main "$@"
