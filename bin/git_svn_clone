#!/bin/bash

url=$1
has() {
    which ${1} >/dev/null 2>&1
    return $?
}
main() {
    [ -z $url ] && echo "Usage.. $0 <url>" && exit 1
    ! has svn && echo "No svn command exists. please install it" 1>&2 && exit 1
    local rev=$(svn log --limit 1 $url \
        | grep '|' \
        | awk '{print $1}' \
        | sed 's/r//g')
    echo "==> git svn cloning rev:$rev .."
    git svn clone -s --prefix=svn/ -r$rev:HEAD $url
}
main
