#!/usr/bin/env bash

debug=0

has() { command -v ${1} >&/dev/null; }
is_debug() { [[ $debug -eq 1 ]]; }
initialize() {
  for arg in "$@"; do
    case "$arg" in
      -d) debug= ;;
    esac
  done
}

check() {
  if ! has nc; then
    echo "No nc command exist" 1>&2
    exit 1
  fi
  if ! has clip; then
    echo "No clip command exist" 1>&2
    exit 1
  fi
  check
}

main() {
  initialize "$@"
  while (true); do
    is_debug && echo "Waiting clip.."
    nc -l 5556 | clip
  done
}
main "$@"
