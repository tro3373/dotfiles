#!/usr/bin/env bash

current_dir=$(pwd)
script_dir=$(cd $(dirname $0); pwd)

src_vag_dir=~/.dot/misc/vagrant/arch
gen_file=~/win/Desktop/vagrantup.bat

has() { which ${1} >& /dev/null; }
change() { cygpath -aw "$*"; }

gen() {
    cat <<EOF >$gen_file
@echo off
cd $(change $src_vag_dir)
vagrant up
EOF
    echo "==> $gen_file generated."
    if ! has nkf; then
        echo "==> No nkf exist. $gen_file is lf utf8ed."
        return
    fi
    nkf -Lw -s --overwrite $gen_file
}
main() {
    if [[ "$OSTYPE" != "msys" ]]; then
        echo "==> Not supported os"
        return
    fi
    gen
}
main "$@"
