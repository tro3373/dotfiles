#!/usr/bin/env bash

sub() {
  local fs=$(
    find $d/ -type f -name '*pdf' |
      sort |
      tr '\n' ' '
  )
  echo pdfcpu merge $d.pdf "$fs"
}

main() {
  find . -maxdepth 1 -mindepth 1 -type d |
    while read -r d; do
      [[ -z $d ]] && continue
      [[ $d =~ ^#.* ]] && continue
      # echo "==> $d" 1>&2
      sub
    done
}
main "$@" #|tee todo.sh
