#!/usr/bin/env bash

readonly _script_dir=$(
  cd "$(dirname ${BASH_SOURCE:-$0})"
  pwd
)
source $_script_dir/../funcs_arch

pre_setup() {
  log "=> pre setting up"

  # setup_hostname archlinux.wsl2
  setup_additional_pacakges
}

load_update_arg_apps() {
  # shellcheck disable=SC2034
  read -a args < <(default_apps)
}

improve_tmp_mount() {
  local target=/etc/fstab
  if grep tmpfs $target >&/dev/null; then
    return
  fi
  echo "tmpfs   /tmp    tmpfs   exec,defaults,nodev,nosuid,noatime,size=256m  0 0" | sudo_tee
}

post_setup() {
  improve_tmp_mount
  log "===> reboot maybe needed."
}
