#!/usr/bin/env bash

readonly repo=tro3373/md
readonly dst_d=$HOME/.md

has() { command -v ${1} >&/dev/null; }
log() { echo "$(date +"%Y-%m-%d %H:%M:%S") $*" | ink yellow; }
main() {
  if [[ -e $dst_d ]]; then
    log "=> Already $dst_d exist."
    return
  fi
  if ! has ghq; then
    log "=> No ghq command exist."
    exit 1
  fi
  local src_d=$(ghq list --full-path $repo)
  if [[ -z $src_d ]]; then
    ghq get git@github.com:$repo.git
  fi
  ln -s $src_d $dst_d
  log "Done"
}
main "$@"
