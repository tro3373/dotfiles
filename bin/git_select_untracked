#!/usr/bin/env -S bash -e

main() {
  git status -s |
    grep '^??' |
    awk '{print $2}' |
    fzf -m \
      --preview 'echo {}; echo "----------------------------------------"; bat --color=always {}' \
      --select-1 \
      --exit-0 \
      --bind 'ctrl-l:toggle-all,ctrl-g:toggle-preview'
}
main "$@"
