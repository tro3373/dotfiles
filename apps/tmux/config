#!/bin/bash

install_ubuntu() {
    def_install autoconf libtool pkg-config libevent-dev autotools-dev automake build-essential libncurses5-dev
    _install_common
}
install_redhat() {
    def_install libevent libeventdevel automake ncursesdevel
    _install_common
}
# install_msys() {
#     def_install base-devel
#     gh_user_local "https://github.com/tmux/tmux.git"
#     mexe ./autogen.sh
#     mexe ./configure --prefix=/usr/local CFLAGS='-D_GNU_SOURCE'
#     mexe make
#     mexe make install
# }

_install_common() {
    gh_user_local "https://github.com/tmux/tmux.git"
    # local target_dir=/usr/local/src/tmux
    # if [[ -e $target_dir ]]; then
    #     mexe cd $target_dir
    #     mexe sudo git pull --rebase
    # else
    #     mexe sudo git clone https://github.com/tmux/tmux.git $target_dir
    #     mexe cd $target_dir
    # fi
    # local tag=$(git tag --list | tail -1)
    # if [[ ! -z $tag ]]; then
    #     mexe sudo git checkout $tag
    # fi
    mexe sudo ./autogen.sh
    mexe sudo ./configure --prefix=/usr/local
    mexe sudo make
    mexe sudo make install
}

setting_common() {
    make_link_dot2home $app_dir
}

